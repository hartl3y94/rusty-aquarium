#!/usr/bin/env sh

# Build release for mac
cargo build --release

# Package mac zip
mkdir -p ./target/RustyAquarium.app/Contents/MacOS
mkdir -p ./target/RustyAquarium.app/Contents/Resources
echo "APPSFooB" > ./target/RustyAquarium.app/Contents/PkgInfo
cp ./target/release/rusty-aquarium ./target/RustyAquarium.app/Contents/MacOS
cp -pR ./assets ./target/RustyAquarium.app/Contents/Resources/
ln -sfh ../Resources/assets ./target/RustyAquarium.app/Contents/MacOS/assets
cp Info.plist ./target/RustyAquarium.app/Contents/
cd ./target
zip -ruqy rusty-aquarium-mac.zip RustyAquarium.app
